{"version":3,"sources":["../src/CustomerSupportChatWidget.tsx"],"sourcesContent":["// src/CustomerSupportChatWidget.tsx\n// A minimal-but-complete customer service chat widget in React + TypeScript.\n// - Floating launcher button\n// - Expandable chat panel\n// - Session persistence via localStorage\n// - Calls a configurable backend chat API endpoint\n// - Simple message list with typing indicator and error handling\n\nimport React, { useEffect, useState, useRef, FormEvent } from \"react\";\nimport \"./CustomerSupportChatWidget.css\";\n\n/**\n * Represents who sent a given chat message.\n */\nexport type SenderType = \"user\" | \"bot\";\n\n/**\n * A single chat message in the widget.\n */\nexport interface ChatMessage {\n  id: string;\n  sender: SenderType;\n  text: string;\n  createdAt: string; // ISO string for potential analytics / sorting\n  fileUrl?: string;\n  fileName?: string;\n}\n\n/**\n * Shape of the backend chat API request.\n * Adjust this to match your backend contract.\n */\nexport interface ChatApiRequest {\n  sessionId: string;\n  message: string;\n  /**\n   * Optional identifier to help backend look up CRM records.\n   * Example: { email: \"user@example.com\" }.\n   */\n  userIdentifier?: Record<string, string>;\n}\n\n/**\n * Shape of the backend chat API response.\n * Adjust this to match your backend contract.\n */\nexport interface ChatApiResponse {\n  reply: string;\n  // You can add more fields here (e.g., topic, suggestedActions, etc.)\n}\n\n/**\n * Props for the CustomerSupportChatWidget component.\n */\nexport interface CustomerSupportChatWidgetProps {\n  /**\n   * Base URL for the chat backend.\n   * Example: \"/api/chat\" or \"https://api.yourdomain.com/chat\".\n   */\n  apiUrl: string;\n  uploadUrl?: string;\n\n  /**\n   * Optional brand or client name to show in header.\n   * Example: \"ClientCo Support\".\n   */\n  title?: string;\n\n  /**\n   * Optional object with known user identifiers (e.g., logged-in user).\n   * This will be sent to the backend so it can search/review the CRM.\n   * Example: { email: \"user@example.com\", phone: \"+15551234567\" }.\n   */\n  userIdentifier?: Record<string, string>;\n\n  /**\n   * Primary accent color for the widget (CSS color value).\n   * Used for header background and launcher button.\n   */\n  primaryColor?: string;\n\n  /**\n   * Optional flag to start with the chat panel open.\n   */\n  defaultOpen?: boolean;\n\n  /**\n   * Optional polling interval (ms) to sync messages from the server.\n   * Defaults to 3000ms. Set to 0 to disable.\n   */\n  pollIntervalMs?: number;\n}\n\n/**\n * Local storage key to persist the chat session ID across page loads.\n */\nconst SESSION_STORAGE_KEY = \"cs_chat_session_id_v1\";\n\n/**\n * Simple helper to create a session ID.\n * Uses crypto.randomUUID when available, falls back to a timestamp-based ID.\n */\nfunction createSessionId(): string {\n  if (typeof crypto !== \"undefined\" && \"randomUUID\" in crypto) {\n    return crypto.randomUUID();\n  }\n  return `session_${Date.now()}_${Math.random().toString(16).slice(2)}`;\n}\n\n/**\n * Retrieves or creates a persistent session ID stored in localStorage.\n */\nfunction getOrCreateSessionId(): string {\n  try {\n    const existing = window.localStorage.getItem(SESSION_STORAGE_KEY);\n    if (existing) return existing;\n\n    const newId = createSessionId();\n    window.localStorage.setItem(SESSION_STORAGE_KEY, newId);\n    return newId;\n  } catch {\n    // If localStorage fails (e.g., disabled), just return a fresh ID each time.\n    return createSessionId();\n  }\n}\n\n/**\n * Main customer support chat widget component.\n */\nexport const CustomerSupportChatWidget: React.FC<\n  CustomerSupportChatWidgetProps\n> = ({\n  apiUrl,\n  title = \"Support\",\n  userIdentifier,\n  primaryColor = \"#2563eb\", // Tailwind-ish blue-600\n  defaultOpen = false,\n  uploadUrl,\n  pollIntervalMs = 3000,\n}) => {\n  const [isOpen, setIsOpen] = useState<boolean>(defaultOpen);\n  const [sessionId, setSessionId] = useState<string | null>(null);\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [inputText, setInputText] = useState<string>(\"\");\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const messagesEndRef = useRef<HTMLDivElement | null>(null);\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n\n  /**\n   * On mount, ensure we have a stable sessionId.\n   */\n  useEffect(() => {\n    const id = getOrCreateSessionId();\n    setSessionId(id);\n  }, []);\n\n  /**\n   * Automatically scroll to the bottom when messages change.\n   */\n  useEffect(() => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n    }\n  }, [messages, isOpen]);\n\n  /**\n   * Periodically sync messages from the server so that admin/backend-sent\n   * messages appear in the widget. Uses GET {apiUrl or derived}/chat?sessionId=...\n   */\n  useEffect(() => {\n    if (!sessionId) return;\n    if (!pollIntervalMs || pollIntervalMs <= 0) return;\n    const messagesUrl = apiUrl.endsWith(\"/chat\")\n      ? apiUrl\n      : apiUrl.replace(/\\/$/, \"\") + \"/chat\";\n\n    let timer: any = null;\n    const load = async () => {\n      try {\n        const res = await fetch(\n          `${messagesUrl}?sessionId=${encodeURIComponent(sessionId)}`,\n        );\n        if (!res.ok) return;\n        const list = (await res.json()) as ChatMessage[];\n        setMessages(Array.isArray(list) ? list : []);\n      } catch {}\n    };\n    load();\n    timer = setInterval(load, pollIntervalMs);\n    return () => {\n      if (timer) clearInterval(timer);\n    };\n  }, [sessionId, apiUrl, pollIntervalMs]);\n\n  /**\n   * Adds a message to local state.\n   */\n  const addMessage = (sender: SenderType, text: string) => {\n    const newMessage: ChatMessage = {\n      id: `${sender}_${Date.now()}_${Math.random().toString(16).slice(2)}`,\n      sender,\n      text,\n      createdAt: new Date().toISOString(),\n    };\n    setMessages((prev) => [...prev, newMessage]);\n  };\n\n  /**\n   * Handles form submission (user sends a message).\n   */\n  const handleSubmit = async (event: FormEvent) => {\n    event.preventDefault();\n    if (!inputText.trim() || !sessionId || isLoading) return;\n\n    const trimmed = inputText.trim();\n\n    // Optimistically add the user message.\n    addMessage(\"user\", trimmed);\n    setInputText(\"\");\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const payload: ChatApiRequest = {\n        sessionId,\n        message: trimmed,\n        userIdentifier,\n      };\n\n      const response = await fetch(apiUrl, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(payload),\n      });\n\n      if (!response.ok) {\n        throw new Error(\n          `Chat API responded with status ${response.status}: ${response.statusText}`,\n        );\n      }\n\n      const data = (await response.json()) as ChatApiResponse;\n\n      // Add the bot's reply message.\n      addMessage(\"bot\", data.reply || \"Iâ€™m sorry, I didnâ€™t receive a response.\");\n    } catch (err) {\n      console.error(\"Chat send error:\", err);\n      setError(\n        \"I ran into a problem reaching our servers. Please try again in a moment.\",\n      );\n      // Optionally add a bot message for user feedback.\n      addMessage(\n        \"bot\",\n        \"Iâ€™m having trouble reaching the support system right now. Please try again shortly or contact us via another channel.\",\n      );\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleFileSelected = async (file: File | null) => {\n    if (!file || !sessionId) return;\n    setIsLoading(true);\n    setError(null);\n    try {\n      const form = new FormData();\n      form.append(\"sessionId\", sessionId);\n      if (userIdentifier) {\n        for (const [k, v] of Object.entries(userIdentifier)) {\n          form.append(`user_${k}`, String(v));\n        }\n      }\n      form.append(\"file\", file, file.name);\n\n      let target = uploadUrl;\n      if (!target) {\n        target = apiUrl.endsWith(\"/chat\")\n          ? apiUrl.replace(/\\/chat$/, \"/upload\")\n          : apiUrl.replace(/\\/$/, \"\") + \"/upload\";\n      }\n\n      const resp = await fetch(target!, { method: \"POST\", body: form });\n      if (!resp.ok) throw new Error(`Upload failed: ${resp.status}`);\n      let fileUrl: string | undefined;\n      try {\n        const data = await resp.json();\n        fileUrl = data?.files?.[0]?.url;\n      } catch {}\n      const label = `Uploaded file: ${file.name}`;\n      if (fileUrl) {\n        const message: ChatMessage = {\n          id: `user_${Date.now()}_${Math.random().toString(16).slice(2)}`,\n          sender: \"user\",\n          text: label,\n          createdAt: new Date().toISOString(),\n          fileUrl,\n          fileName: file.name,\n        };\n        setMessages((prev) => [...prev, message]);\n      } else {\n        addMessage(\"user\", label);\n      }\n    } catch (e) {\n      console.error(\"upload error\", e);\n      setError(\"We couldn't upload your file. Please try again.\");\n    } finally {\n      setIsLoading(false);\n      if (fileInputRef.current) fileInputRef.current.value = \"\";\n    }\n  };\n\n  /**\n   * Basic header subtitle showing user identifier if available.\n   */\n  const renderSubtitle = () => {\n    if (!userIdentifier)\n      return \"Ask us anything about your account or our services.\";\n    if (userIdentifier.email) return `Signed in as ${userIdentifier.email}`;\n    if (userIdentifier.phone) return `Signed in with ${userIdentifier.phone}`;\n    return \"Ask us anything about your account or our services.\";\n  };\n\n  return (\n    <div\n      className=\"cs-chat-root\"\n      style={{ [\"--cs-primary\" as any]: primaryColor } as React.CSSProperties}\n    >\n      {/* Floating launcher button */}\n      <button\n        type=\"button\"\n        className=\"cs-chat-launcher\"\n        onClick={() => setIsOpen((prev) => !prev)}\n        aria-label={isOpen ? \"Close support chat\" : \"Open support chat\"}\n      >\n        {/* Simple icon: chat bubble */}\n        <span className=\"cs-chat-launcher-icon\" aria-hidden=\"true\">\n          ðŸ’¬\n        </span>\n      </button>\n\n      {/* Chat panel */}\n      {isOpen && (\n        <div className=\"cs-chat-panel\">\n          <div className=\"cs-chat-header\">\n            <div className=\"cs-chat-header-main\">\n              <div className=\"cs-chat-title\">{title}</div>\n              <div className=\"cs-chat-subtitle\">{renderSubtitle()}</div>\n            </div>\n            <button\n              type=\"button\"\n              className=\"cs-chat-header-close\"\n              onClick={() => setIsOpen(false)}\n              aria-label=\"Close chat\"\n            >\n              âœ•\n            </button>\n          </div>\n\n          <div className=\"cs-chat-body\">\n            {/* Optional error banner */}\n            {error && <div className=\"cs-chat-error\">{error}</div>}\n\n            {/* Messages list */}\n            <div className=\"cs-chat-messages\">\n              {messages.map((msg) => (\n                <div\n                  key={msg.id}\n                  className={`cs-chat-message cs-chat-message--${msg.sender}`}\n                >\n                  <div className=\"cs-chat-message-bubble\">\n                    {msg.fileUrl ? (\n                      <a href={msg.fileUrl} target=\"_blank\" rel=\"noreferrer\">\n                        {msg.text || msg.fileName}\n                      </a>\n                    ) : (\n                      msg.text\n                    )}\n                  </div>\n                </div>\n              ))}\n\n              {/* Typing indicator */}\n              {isLoading && (\n                <div className=\"cs-chat-message cs-chat-message--bot\">\n                  <div className=\"cs-chat-message-bubble cs-chat-typing-indicator\">\n                    <span className=\"cs-dot\" />\n                    <span className=\"cs-dot\" />\n                    <span className=\"cs-dot\" />\n                  </div>\n                </div>\n              )}\n\n              <div ref={messagesEndRef} />\n            </div>\n          </div>\n\n          <form className=\"cs-chat-input-row\" onSubmit={handleSubmit}>\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              className=\"cs-chat-file-input\"\n              aria-label=\"Attach file\"\n              onChange={(e) => handleFileSelected(e.target.files?.[0] || null)}\n              style={{ display: \"none\" }}\n            />\n            <button\n              type=\"button\"\n              className=\"cs-chat-attach-button\"\n              onClick={() => fileInputRef.current?.click()}\n              disabled={isLoading || !sessionId}\n              aria-label=\"Attach a file\"\n              title=\"Attach a file\"\n            >\n              ðŸ“Ž\n            </button>\n            <input\n              type=\"text\"\n              className=\"cs-chat-input\"\n              placeholder=\"Type your message...\"\n              value={inputText}\n              onChange={(e) => setInputText(e.target.value)}\n              disabled={isLoading || !sessionId}\n            />\n            <button\n              type=\"submit\"\n              className=\"cs-chat-send-button\"\n              disabled={isLoading || !sessionId || !inputText.trim()}\n            >\n              Send\n            </button>\n          </form>\n        </div>\n      )}\n    </div>\n  );\n};\n"],"mappings":"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","names":[]}